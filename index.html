<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Home page</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(function(){
            var room = "";
            var socket = io.connect();
            var currentPlayer;

            $("#selectroom").click(function(){
                room = $("#roomname").val();
                console.log(room);
                socket.emit('room', room);
            })

            $('registerButton').click(function(){
                  var Username =   $("#username").val();
                  socket.emit('addUser', Username);
            });
            
           $('#randomNumberButton').click(function(){
             var randomNum= Math.floor(Math.random() * 5) + 1;
             console.log("random number is " + randomNum);
             if(currentPlayer ==1 ) currentPlayer = 2;
             else currentPlayer = 1;

             var currentChance={
                currentPlayer:currentPlayer,
                number:randomNum,
                room:room

             }
 
             
             socket.emit('gridchange', currentChance);
           })

            // socket.on('connect', function() {
            //     socket.emit('room', room);
            // });

            socket.on('start', function(data) {
                console.log(data);
                var board=data.message.board;
                var players=data.message.players;
                players.forEach(function(player){
                    var player_element = document.getElementById('player-'+player.id);
                    if (player_element){
                        player_element.remove();
                    }
                });
                for(count=0;count<board.length;count++){
                    var currentField=board[count];
                    if(currentField.players.length>0){

                        var cellId=currentField.id;
                        var element=document.getElementById(cellId);
debugger;
                       

                        currentField.players.forEach(function(player) {
                            var currentPlayer = players.filter(t => t.id ==player)[0];
                            var dateSpan = document.createElement('span')
                            dateSpan.innerHTML = currentPlayer.name;
                            dateSpan.id = "player-" + currentPlayer.id;
                            element.appendChild(dateSpan);
                        }, this);
                        
                    }
                }
                
            });

            socket.on('message', function(data) {
                $('#incomingChatMessages').append($('<li></li>').text(data));
                $('#outgoingChatMessage').val('');
                console.log('Incoming message:', data);
            });
            // var iosocket = io.connect();
            // iosocket.on('connect', function () {
            //     $('#incomingChatMessages').append($('<li>Connected</li>'));
            //     iosocket.on('message', function(message) {
            //         $('#incomingChatMessages').append($('<li></li>').text(message));
            //     });
            //     iosocket.on('disconnect', function() {
            //         $('#incomingChatMessages').append('<li>Disconnected</li>');
            //     });
            // });
            $('#outgoingChatMessage').keypress(function(event) {
                if(event.which == 13) {
                    event.preventDefault();
                    socket.send($('#outgoingChatMessage').val());
                    $('#outgoingChatMessage').val('');
            }});
        });
    </script>
</head>
<body>
    <input id="roomname" type="text">
    <button id="selectroom"> SELECT ROOM </button>
    <br>
    <br>
    <div>


    </div>
Incoming Chat: <ul id="incomingChatMessages"></ul>
<br />
<input type="text" id="outgoingChatMessage">

<br>

    <div class="no-gutters container-fluid ">

        <div class="row  no-gutters">
            <div class="col-lg-10 col-md-8 col-sm-10 col-12">

                <!-- <div class="row no-gutters ">
                    <div class="backgaround">
                            <img class="img-fluid"  src="images/bg.jpg" alt="">
                    </div>    
                    
                </div>  -->

                <div class="row  no-gutters ">
                    <div class="svg">
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                            width="850px"  viewBox="0 0 1200.12 1100.608" enable-background="new 0 0 1200.12 1100.608"
                            xml:space="preserve">
                            <g>
                                <g>
                                    <g>
                                        <path fill="#083A4F" d="M141.088,640.298c8.136-21.319,18.557-42.695,31.618-63.311c13.058-20.596,28.77-40.447,47.254-58.301
                                       c9.229-8.929,19.127-17.36,29.62-25.146l3.95-2.904c1.315-0.968,2.742-1.914,4.111-2.869l4.156-2.853l4.191-2.653l4.203-2.635
                                       l4.216-2.486l4.232-2.47l4.338-2.38c11.604-6.299,23.889-12.042,37.053-16.6l4.946-1.688c1.669-0.53,3.362-1.025,5.045-1.535
                                       c3.341-1.057,6.828-1.869,10.255-2.77c6.963-1.594,14.027-2.987,21.258-3.821c14.422-1.768,29.277-1.729,43.703,0.087
                                       c7.206,0.93,14.301,2.26,21.224,3.932c6.899,1.714,13.608,3.762,20.118,6.049c12.99,4.617,25.102,10.207,36.436,16.179
                                       c11.356,5.971,21.969,12.318,32.135,18.658c20.305,12.717,38.849,25.371,56.959,36.439
                                       c18.068,11.082,35.642,20.625,52.967,27.645c5.198,2.12,10.416,4.015,15.645,5.756l3.923,1.279l3.932,1.186
                                       c1.351,0.431,2.503,0.702,3.741,1.052c1.243,0.33,2.363,0.685,3.799,0.991l4.101,0.959l4.327,0.977
                                       c2.915,0.672,5.852,1.271,8.782,1.896c5.872,1.201,11.767,2.349,17.688,3.36c11.837,2.067,23.756,3.746,35.696,4.988
                                       c11.939,1.271,23.9,2.087,35.807,2.425c23.803,0.702,47.434-0.589,69.927-4.44c22.452-3.893,43.768-10.373,62.233-20.042
                                       c2.354-1.148,4.544-2.494,6.82-3.725l3.282-2l1.643-0.994l1.586-1.057c4.307-2.727,8.286-5.788,12.201-8.887
                                       c1.889-1.62,3.841-3.173,5.628-4.885c1.868-1.633,3.589-3.403,5.348-5.135c3.416-3.558,6.734-7.199,9.729-11.129
                                       c1.566-1.902,2.965-3.953,4.419-5.954c0.752-0.979,1.377-2.067,2.074-3.094c0.668-1.051,1.396-2.053,2.027-3.134
                                       c1.252-2.172,2.625-4.249,3.772-6.506l1.811-3.316l1.672-3.426c1.173-2.242,2.13-4.646,3.19-6.974
                                       c1.034-2.349,1.912-4.808,2.898-7.194c0.837-2.486,1.763-4.917,2.563-7.431l1.167-3.791l0.591-1.893l0.52-1.935
                                       c2.848-10.277,4.938-21.017,6.353-32.039c0.348-2.759,0.72-5.508,0.938-8.318c0.247-2.797,0.566-5.572,0.696-8.402l0.265-4.225
                                       l0.136-2.11l0.1-2.354c0.133-3.143,0.267-6.283,0.398-9.42c1.003-25.188,1.427-50.46,1.973-76.057
                                       c3.628,0.094,8.713,17.213,10.894,0.236c1.733-17,3.56-29.872,5.522-39.549c0.95-4.821,1.951-8.857,2.939-12.207
                                       c0.987-3.349,1.938-6.004,2.938-8.134c3.936-8.492,7.559-8.213,11.182-7.976c0.906,0.062,1.161,3.308,1.107,7.874
                                       c-0.072,4.569-0.309,10.439-0.578,15.786c-0.429,10.676-0.699,19.19,1.405,10.741c-0.892,25.565-0.897,59.425-0.568,80.536
                                       c0.165,10.557,0.493,17.953,1.105,19.553c0.611,1.601,1.604-2.582,2.856-15.239c2.078-8.396,2.522-29.541,3.182-50.702
                                       c0.331-10.578,0.781-21.165,1.551-30.146c0.787-8.982,1.884-16.358,3.471-20.512c3.133-8.321,5.646-3.934,8.163,0.385
                                       c2.517,4.334,5.034,8.599,8.159,0.412c0.365-8.345,1.141-20.767,2.262-33.072c0.308-3.068,0.557-6.154,0.903-9.143
                                       c0.349-2.988,0.689-5.912,1.016-8.709c0.345-2.791,0.752-5.43,1.087-7.894c0.337-2.464,0.661-4.732,1.02-6.727
                                       c3.135-7.688,5.143-3.179,6.728,1.095c0.396,1.073,0.76,2.135,1.116,3.005c0.371,0.878,0.72,1.56,1.051,1.859
                                       c0.684,0.609,1.192-0.348,1.87-4.228c5.474-23.163,12.415-49.063,24.341-74.584c5.949-12.764,13.203-25.409,21.761-37.641
                                       c8.55-12.23,18.419-24.027,29.289-35.126c1.296,1.272,5.563-0.481,6.704,0.626c0.57,0.553,0.357,1.822-1.398,4.542
                                       c-0.744,1.265-1.816,2.85-3.313,4.843c-0.748,0.995-1.602,2.092-2.571,3.3c-0.485,0.603-0.996,1.235-1.533,1.901
                                       c-0.515,0.677-1.055,1.387-1.621,2.132c-10.788,12.29-20.306,25.27-28.36,38.945l-1.537,2.551l-1.408,2.615l-2.831,5.222
                                       c-0.951,1.737-1.746,3.553-2.633,5.321c-0.844,1.79-1.781,3.532-2.561,5.355l-2.366,5.454c-0.392,0.911-0.807,1.81-1.18,2.729
                                       l-1.068,2.786l-2.153,5.564c-0.672,1.879-1.289,3.787-1.942,5.676c-1.361,3.75-2.421,7.659-3.595,11.512
                                       c-0.615,1.91-1.052,3.917-1.58,5.875c-0.497,1.976-1.047,3.923-1.51,5.918l-1.335,6.016l-0.671,3.008l-0.577,3.061l-1.163,6.119
                                       c-0.365,2.054-0.668,4.143-1.008,6.212c-1.365,8.271-2.329,16.785-3.24,25.345c-0.369,4.335-0.796,8.633-1.11,13.008
                                       c-0.289,4.392-0.649,8.735-0.856,13.189c-1.965,35.413-1.804,72.518-2.553,110.391l-0.309,14.238l-0.401,14.304l-0.517,14.388
                                       l-0.441,7.839l-0.228,3.921l-0.341,3.934l-0.704,7.869l-0.945,7.903c-0.286,2.631-0.704,5.276-1.113,7.92
                                       c-0.431,2.646-0.761,5.282-1.285,7.935c-1.844,10.59-4.366,21.215-7.421,31.794c-6.177,21.146-15.207,42.156-27.441,61.714
                                       c-12.252,19.536-27.878,37.388-45.762,52.168c-17.872,14.83-37.844,26.563-58.396,35.383
                                       c-20.582,8.844-41.741,14.883-62.811,18.905c-21.088,4.002-42.116,5.975-62.911,6.551c-20.802,0.567-41.384-0.293-61.708-2.289
                                       c-20.328-1.991-40.414-5.078-60.266-9.137c-9.926-2.03-19.791-4.319-29.604-6.846l-3.827-1.004l-3.892-1.042
                                       c-1.255-0.315-2.686-0.77-4.077-1.198l-4.182-1.298l-1.044-0.327l-0.977-0.328l-1.948-0.658l-3.895-1.321l-7.691-2.801
                                       c-20.354-7.729-39.363-17.289-57.108-27.453c-17.771-10.168-34.276-20.954-50.056-31.284
                                       c-15.771-10.34-30.786-20.22-45.338-28.563c-7.264-4.15-14.398-7.912-21.383-11.147c-6.977-3.188-13.801-5.866-20.445-7.905
                                       c-6.643-1.982-13.108-3.421-19.467-4.154c-6.361-0.71-12.636-0.862-18.979-0.347c-12.654,1.069-25.772,4.659-39.223,10.617
                                       c-6.713,2.966-13.473,6.491-20.215,10.446c-3.428,1.977-6.622,4.032-9.83,6.067l-4.552,3.154
                                       c-1.533,1.089-3.101,2.285-4.654,3.415c-12.341,9.324-23.855,19.9-34.25,31.74c-10.405,11.82-19.874,24.7-28.188,38.523
                                       c-4.172,6.899-8.088,14.005-11.754,21.284c-3.65,7.289-7.017,14.771-10.154,22.38c-6.301,15.212-11.454,31.06-15.744,47.217
                                       c-4.196,16.193-7.502,32.722-9.789,49.463c-9.197,66.962-3.809,136.809,15.432,201.327c4.129,14.831,6.605,23.114,6.869,26.882
                                       c0.23,2.034-0.087,2.792-0.857,2.484c-0.385-0.154-0.884-0.574-1.483-1.235c-0.595-0.648-1.234-1.431-1.981-2.461
                                       c-2.997-4.058-7.188-11.37-11.648-20.537c-4.455-9.165-9.088-20.219-13.157-31.54c2.733,7.526,2.879,11.573,3.056,15.664
                                       c0.074,2.047,0.167,4.097,0.659,6.556c0.475,2.464,1.299,5.355,2.938,9.03c-1.289,0.398-3.437-1.021-6.152-4.423
                                       c-1.344-1.705-2.871-3.893-4.492-6.599c-1.57-2.722-3.37-5.921-5.104-9.69c-3.573-7.506-7.338-17.168-10.815-29.087
                                       c-3.483-11.913-6.585-26.105-8.767-42.537c0.855,8.239,1.904,16.452,3.126,24.641c1.28,8.179,2.667,16.345,4.33,24.463
                                       c0.788,8.286-0.493,8.591-2.499,6.888c-2.003-1.697-4.639-5.439-6.399-5.089c-1.691-8.267-3.094-16.576-4.306-22.784
                                       c-1.177-6.213-2.193-10.33-3.104-10.209c-1.797,0.243-5.398,0.729-7.197,0.973c1.155,8.487,3.138,21.201,5.703,33.81
                                       c2.521,12.617,5.629,25.113,7.912,33.374c-2.299-8.26-4.246-16.608-5.912-22.828c-1.584-6.237-2.909-10.351-3.777-10.177
                                       c-1.78,0.359-5.341,1.079-7.125,1.439c-4.362-16.931-7.289-38.643-8.668-60.395c-1.417-21.767-1.453-43.527-1.821-60.994
                                       l-5.441-0.145c-1.457,17.607-0.961,39.729,1.157,61.666c2.082,21.954,5.932,43.674,9.438,60.945
                                       c-2.638-8.472-4.225-12.688-5.755-14.674c-1.511-1.991-2.827-1.774-4.628-1.471c-5.33-26.283-6.947-53.158-7.086-79.885
                                       c-0.133-26.775,1.17-53.4,1.891-80.451c-1.117,8.909-2.073,17.839-2.723,26.783c-0.687,8.942-1.159,17.895-1.377,26.844
                                       c-2.036-9.011-2.738-21.48-2.018-35.893c0.727-14.408,2.797-30.752,6.189-47.463c3.313-16.724,7.93-33.796,13.01-49.854
                                       C130.55,668.243,136.16,653.215,141.088,640.298z" />
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </div>
                   
                    <div class="w-100"></div>
                    <div  id="24" class=" col border hh">24</div>
                    <div  id="23" class=" col border hh">23</div>
                    <div  id="22" class=" col border hh">22</div>
                    <div  id="21" class=" col border hh">21</div>
                    <div  id="20" class=" col border hh">20</div>
                    <div  id="19" class=" col border hh">19</div>

                   
                    <div class="w-100"></div>
                    <div  id="13" class=" col border hh">13</div>
                    <div  id="14" class=" col border hh">14</div>
                    <div  id="15" class=" col border hh">15</div>
                    <div  id="16" class=" col border hh">16</div>
                    <div  id="17" class=" col border hh">17</div>
                    <div  id="18" class=" col border hh">18</div>

                    <div class="w-100"></div>
                    <div id="12"  class=" col border hh">12</div>
                    <div id="11" class=" col border hh">11</div>
                    <div id="10" class=" col border hh">10</div>
                    <div id="9" class=" col border hh">9</div>
                    <div id="8" class=" col border hh">8</div>
                    <div id="7" class=" col border hh">7</div>


                    <div class="w-100"></div>
                    <div id="1" class=" col border hh">1</div>
                    <div id="2" class=" col border hh">2</div>
                    <div id="3" class=" col border hh">3</div>
                    <div id="4" class=" col border hh">4</div>
                    <div id="5" class=" col border hh">5</div>
                    <div id="6"  class=" col border hh">6</div>

                    
                    <div class="w-100"></div>



                </div>

            </div>
            <div class="col-lg-2 col-md-4 col-sm-2 col-12"> hello
                  <input id="username" type="text">
                  <button id="register">register</button>

                <button id="randomNumberButton">Click</button>

            </div>

            
        </div>


        <!-- <canvas id="myCanvas">
 
            </canvas> -->


    </div>

    <script src="./js/vendor.js"></script>
    <script src="./js/main.js"></script>

</body>
</html>